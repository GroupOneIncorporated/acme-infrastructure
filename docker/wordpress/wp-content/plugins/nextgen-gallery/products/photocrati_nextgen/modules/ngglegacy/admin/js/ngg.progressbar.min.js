!function(i){nggProgressBar={settings:{id:"progressbar",maxStep:100,wait:!1,header:"",init:!1},init:function(t){t=this.settings=i.extend({},this.settings,{},t||{}),width=Math.round(100/t.maxStep*100)/100,0==i("#"+t.id+"_dialog").length&&(t.header=t.header.length>0?t.header:"",i("body").append('<div id="'+t.id+'_dialog"><div id="'+t.id+'" class="progressborder"><div class="'+t.id+'"><span>0%</span></div></div></div>'),i("#"+t.id+"_dialog").dialog({width:640,resizable:!0,modal:!0,title:t.header,position:{my:"center",at:"center",of:this.find_parent(window)}})),this.div=i("#"+t.id+"_dialog"),t.init=!0},find_parent:function(i){var t=i;try{t&&t.parent&&(t=t.parent)}catch(i){}return t},addMessage:function(t){s=this.settings,s.init||this.init();var d=this.div;0==d.find("#"+s.id+"_message").length?d.append('<div class="'+s.id+'_message"><span style="display:block" id="'+s.id+'_message">'+t+"</span></div>"):i("#"+s.id+"_message").html(t)},addNote:function(t,d){s=this.settings,s.init||this.init();var e=this.div;s.wait=!0,0==e.find("#"+s.id+"_note").length&&e.append('<ul id="'+s.id+'_note">&nbsp;</ul>'),d?i("#"+s.id+"_note").append("<li>"+t+"<div class='show_details'><span>[more]</span><br />"+d+"</div></li>"):i("#"+s.id+"_note").append("<li>"+t+"</li>"),e.dialog("option","height",220)},increase:function(t){s=this.settings;var d=t*width+"%",e=Math.round(t*width)+"%";i("#"+s.id+" div").width(d),i("#"+s.id+" span").html(e),i(this.find_parent(window).document).scrollTop(0);var n=i(this.find_parent(window).frameElement).parent(),a=n.css("top");setTimeout(function(){n.css("top",0)},1),setTimeout(function(){n.css("top",a)},3)},finished:function(){s=this.settings,i("#"+s.id+" div").width("100%"),i("#"+s.id+" span").html("100%");var t=this.div,d=this;s.wait?(i("#"+s.id).delay(1e3).hide("slow"),d.addNote("Done!"),t.click(function(){d.remove_dialog(!1,0)})):window.setTimeout(function(){d.remove_dialog(!0,1)},1e3)},remove_dialog:function(t,d){t?i("#"+s.id+"_dialog").delay(4e3).dialog("destroy"):i("#"+s.id+"_dialog").dialog("destroy"),i("#"+s.id+"_dialog").remove(),i(".nggform").prepend('<input type="hidden" name="ajax_callback" value="'+d+'">'),t?i(".nggform").delay(4e3).submit():i(".nggform").submit()}}}(jQuery);