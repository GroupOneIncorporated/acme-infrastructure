# Values to be injected into the acme wordpress platform umbrella chart.
# Namespace = acme
# Use this file to specify namespace-specific values.
# Enable/disable services by setting the "enabled" flag.

resources: {}

# ---Ingress resource for routing and certificates---
#
# Set production flag to true to use real certificates from letsencrypt.
# Otherwise letsencrypt staging server will be used.
ingress:
  enabled: true
  production: false
  spec:
    hosts:
      #- wordpress: 
      #    hostName: acme-wordpress.rooter.se
      #    secretName: acme-wordpress-cert
      #    serviceName: wordpress
      #    servicePort: 80
      #- nodetest:
      #    hostName: nodetest.rooter.se
      #    secretName: nodetest-cert
      #    serviceName: nodetest
      #    servicePort: 80
      - kube-state-metrcis:
          hostName: metrics.acme-wordpress.rooter.se
          secretName: kube-state-metrics-cert
          serviceName: kube-state-metrics
          servicePort: 8080


# ---Internal services---

wordpress:
  nameOverride: wordpress
  fullnameOverride: wordpress
  image:
    registry: docker.io
    repository: brocahontaz/acme_wordpress
    tag: latest
  wordpressUsername: admin
  wordpressPassword: supersecretpassword123
  wordpressEmail: johan@rooter.se
  wordpressFirstName: Johan
  wordpressLastName: Andersson
  wordpressBlogName: ACME
  wordpressSkipInstall: true
  replicaCount: 1
  #allowOverrideNone: yes
  #htaccessPersistenceEnabled: yes
  service:
    type: ClusterIP
    externalTrafficPolicy: Cluster
    #loadBalancerIP: 194.47.177.61
  ingress: 
    enabled: true
    certManager: false
    hostname: "acme-wordpress.rooter.se"
    annotations: 
      kubernetes.io/ingress.class: "nginx"
      cert-manager.io/cluster-issuer: "letsencrypt-staging"
    tls: false
    extraHosts:
      - name: "acme-wordpress.rooter.se"
        path: /
    extraTls:
      - hosts:
          - acme-wordpress.rooter.se
        secretName: acme-wordpress.rooter.se-tls
  persistence:
    enabled: true
    storageClass: wp-gold
    accesMode: ReadWriteOnce
    size: 8G
  mariadb:
    enabled: true
    image:
      registry: docker.io
      repository: brocahontaz/acme_mariadb
      tag: latest
    replication:
      enabled: false
    db:
      #name: acme
      #user: admin
      #password: supersecretpassword123
      rootUser:
        password: supersecretpassword123
    master:
      persistence: 
        enabled: true
        storageClass: sql-gold
        accessModes: [ReadWriteOnce]
        size: 8G
    volumePermissions:
      enabled: true
    auth:
      rootPassword: supersecretpassword123

# ---External services---

nginx-ingress-controller:
  replicaCount: 1
  service: 
    type: LoadBalancer
    loadBalancerIP: 31.12.86.208
    externalTrafficPolicy: Cluster